---
title: "p8105_hw2_hy2580"
author: "haokun yuan"
date: "10/1/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

##Problem 1

Read and Clean the Data:
```{r}
nyc_transit_data = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names()
# import data and format data with appropriate variable names
nyc_transit_data = select(nyc_transit_data, line, station_name, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, station_latitude, station_longitude, entry, vending, entrance_type, ada)
# select wanted variables
nyc_transit_data$entry = recode(nyc_transit_data$entry, `YES` = TRUE, `NO` = FALSE )
# convert the class of variable "entry" to logical
```

The nyc_transit_data dataset contains 13 variables, which are "line","station","route"


I first use janitor:clean_names to convert the names of the variable, then selected the variable we want from the original dataset and changed the value of "entry" variable to logical variable. There are `{r}ncol(nyc_transit_data)` columns and `{r}nrow(nyc_transit_data)` rows in the dataset.
The dataset is not tidy although all the column are variables, rows are observations and every value has a cell, route number is spread into 11 columns.

There are `{r}count(distinct(nyc_transit_data, station_name, line))` distinct stations.

`{r}sum(distinct(nyc_transit_data,station_name, ada)$ada, na.rm = TRUE)` stations are ADA compliant.

`{r}count(nyc_transit_data, vending)`


```{r}
nyc_transit_tidy = gather(nyc_transit_data, key = "route_number", value = "route_name", route1:route11)
# tidy nyc_transit_data
# make route number and route name distinct variables
```

```{r}
nyc_transit_a = filter(nyc_transit_tidy, route_name == "A")
#exclude all the route name except A 
```

There are `{r}count(distinct(nyc_transit_a,station_name))`distinct stations serve the A train.

Of the stations that serves A train,`{r}` of them are ADA compliant.

##Problem 2

```{r}
library(readxl)
mr_trash_wheel = read_excel("data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 1, range = cell_cols("A:N")) %>%
  janitor::clean_names() %>% 
# specify sheet number = 1
# omit column M
# format the data with appropriate variable names
  mutate(sports_balls = as.integer(round(sports_balls, digits = 0)))
# round the number of sports balls.
# convert the class of sports balls to integer.
```

```{r}
prcp_2017 = read_excel("data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 3) %>% 
  janitor::clean_names() 
  
# import precipitation data on 2017
prcp_2016 = read_excel("data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 4) %>% 
  janitor::clean_names() 
# import precipitation data on 2016

#prcp = left_join(prcp_2017, prcp_2016, by = "year")

```




